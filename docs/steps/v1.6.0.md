# WalletWise v1.6.0 - Polish & Improvements

> Correcciones de bugs, mejoras visuales y nueva funcionalidad de vueltos

**Version:** 1.6.0
**Estado:** Completado
**Fecha:** 2026-01-16

---

## Descripcion

Version 1.6.0 incluye correcciones de bugs identificados, mejoras visuales (colores pasteles, fondo gris), mejoras de UX en el dashboard, y una nueva funcionalidad importante: sistema de vueltos para gastos e ingresos.

**Total: 8 cambios organizados por prioridad + mejoras adicionales de UX**

---

## Orden de Implementacion

| Prioridad | Tipo   | Punto | Descripcion                        |
| --------- | ------ | ----- | ---------------------------------- |
| 1         | Bug    | #1    | Sidebar mobile - scroll accordions |
| 2         | Bug    | #2    | Dropdown categorias - overflow     |
| 3         | Bug    | #8    | Dashboard - Ahorro tasas custom    |
| 4         | UI     | #3    | Colores pasteles (modo oscuro)     |
| 5         | UI     | #4    | Background gris (modo oscuro)      |
| 6         | UI     | #5    | Comparacion de tasas - lista       |
| 7         | UI     | #6    | Balance por cuenta - conversion    |
| 8         | Feature| #7    | Sistema de vueltos                 |

---

## Fase 1: Bug - Sidebar Mobile Scroll

**Problema:** Cuando todos los accordions estan abiertos en mobile, no se puede hacer scroll en el sidebar.

**Solucion:** Implementar accordion exclusivo (solo uno abierto a la vez).

### Especificaciones

| Aspecto                    | Detalle                                                   |
| -------------------------- | --------------------------------------------------------- |
| Comportamiento             | Al abrir un accordion, los demas se cierran automaticamente|
| Accordion con item activo  | PUEDE cerrarse aunque el item actual pertenezca a el      |
| Scroll                     | Con un solo accordion abierto, el scroll deberia funcionar|

### Cambios en Codigo

```typescript
// components/layout/mobile-sidebar.tsx
// Cambiar de accordions independientes a accordion exclusivo

// Estado actual (multiple abiertos):
const [openItems, setOpenItems] = useState<string[]>([])

// Nuevo (solo uno abierto):
const [openItem, setOpenItem] = useState<string | null>(null)

// Al hacer clic en accordion:
const handleAccordionClick = (itemId: string) => {
  setOpenItem(openItem === itemId ? null : itemId)
}
```

### Archivos a Modificar

| Archivo                              | Cambio                                    |
| ------------------------------------ | ----------------------------------------- |
| `components/layout/mobile-sidebar.tsx` | Cambiar a accordion exclusivo           |
| `components/layout/sidebar.tsx`      | Opcional: aplicar mismo comportamiento    |

---

## Fase 2: Bug - Dropdown Categorias Overflow

**Problema:** En `/dashboard/categories`, al seleccionar categoria padre, el dropdown es muy grande y oculta los ultimos items.

**Solucion:** Agregar altura maxima con scroll interno al dropdown.

### Especificaciones

| Aspecto          | Detalle                                    |
| ---------------- | ------------------------------------------ |
| Altura maxima    | `max-h-60` (240px) o similar               |
| Scroll           | `overflow-y-auto` para scroll interno      |
| Indicador visual | Sombra o gradiente al final si hay mas items|

### Cambios en Codigo

```typescript
// En el componente Select o Combobox de categoria padre
<SelectContent className="max-h-60 overflow-y-auto">
  {categories.map(category => (
    <SelectItem key={category.id} value={category.id}>
      {category.name}
    </SelectItem>
  ))}
</SelectContent>
```

### Archivos a Modificar

| Archivo                                            | Cambio                        |
| -------------------------------------------------- | ----------------------------- |
| `app/dashboard/categories/_components/category-form.tsx` | Agregar max-h y overflow |

---

## Fase 3: Bug - Ahorro por Tasas Custom

**Problema:** La card "Ahorro por tasas custom" en el dashboard muestra $0 o vacio aunque hay transacciones con tasas custom.

### Especificaciones

| Aspecto          | Detalle                                                      |
| ---------------- | ------------------------------------------------------------ |
| Estado actual    | Muestra $0 o vacio                                           |
| Esperado         | Mostrar calculo de ahorro/perdida del mes actual             |
| Transacciones    | Gastos, transferencias e ingresos con tasa custom            |
| Periodo          | Mes actual                                                   |

### Formula de Calculo

```
Para GASTOS:
  Si tasa_custom < tasa_oficial:
    ahorro = monto * (tasa_oficial - tasa_custom) / tasa_oficial
  Si tasa_custom > tasa_oficial:
    perdida = monto * (tasa_custom - tasa_oficial) / tasa_custom

Para INGRESOS y TRANSFERENCIAS:
  Si tasa_custom > tasa_oficial:
    perdida = monto * (tasa_custom - tasa_oficial) / tasa_custom
  Si tasa_custom < tasa_oficial:
    ahorro = monto * (tasa_oficial - tasa_custom) / tasa_oficial

Total = suma(ahorros) - suma(perdidas)
```

### Archivos a Modificar

| Archivo                               | Cambio                                    |
| ------------------------------------- | ----------------------------------------- |
| `app/api/dashboard/service.ts`        | Revisar/corregir query de ahorro          |
| `app/dashboard/_components/savings-card.tsx` | Verificar que muestre el valor     |

### Investigacion Requerida

- [ ] Verificar si las transacciones tienen `exchangeRate` y `customRate` guardados
- [ ] Verificar si el query filtra correctamente por mes actual
- [ ] Verificar si la formula en el servicio es correcta
- [ ] Verificar si el componente recibe los datos del API

---

## Fase 4: UI - Colores Pasteles (Modo Oscuro)

**Objetivo:** Cambiar colores intensos (azul, verde, rojo, morado) por versiones pasteles mas suaves.

### Especificaciones

| Aspecto       | Detalle                                           |
| ------------- | ------------------------------------------------- |
| Alcance       | Todo: botones, badges, graficos, iconos, bordes   |
| Modo          | Solo modo oscuro (claro se mantiene igual)        |

### Paleta de Colores Propuesta

| Color Actual    | Hex Actual | Color Pastel | Hex Pastel |
| --------------- | ---------- | ------------ | ---------- |
| Primary (Azul)  | #3b82f6    | Azul pastel  | #93c5fd    |
| Success (Verde) | #22c55e    | Verde pastel | #86efac    |
| Danger (Rojo)   | #ef4444    | Rojo pastel  | #fca5a5    |
| Warning (Amarillo)| #eab308  | Amarillo pastel| #fde047   |
| Purple          | #a855f7    | Morado pastel| #d8b4fe    |

### Archivos a Modificar

| Archivo                    | Cambio                                     |
| -------------------------- | ------------------------------------------ |
| `app/globals.css`          | Variables CSS para colores en dark mode    |
| `tailwind.config.ts`       | Extender paleta con colores pasteles       |
| Componentes de graficos    | Usar nuevos colores en Recharts            |

### Ejemplo de Implementacion

```css
/* globals.css */
.dark {
  --primary: 210 100% 78%;      /* Azul pastel */
  --success: 142 76% 73%;       /* Verde pastel */
  --destructive: 0 93% 82%;     /* Rojo pastel */
  --warning: 50 96% 64%;        /* Amarillo pastel */
}
```

---

## Fase 5: UI - Background Gris (Modo Oscuro)

**Objetivo:** Cambiar el fondo oscuro actual por un gris medio (#2a2a2a) menos intenso.

### Especificaciones

| Aspecto       | Detalle                                    |
| ------------- | ------------------------------------------ |
| Color actual  | Negro o gris muy oscuro (#0a0a0a aprox)    |
| Color nuevo   | Gris medio #2a2a2a                         |
| Modo          | Solo modo oscuro                           |

### Archivos a Modificar

| Archivo             | Cambio                                  |
| ------------------- | --------------------------------------- |
| `app/globals.css`   | Variable `--background` en dark mode    |

### Ejemplo de Implementacion

```css
/* globals.css */
.dark {
  --background: 0 0% 16%;  /* #2a2a2a */
  --card: 0 0% 18%;        /* Slightly lighter for cards */
}
```

---

## Fase 6: UI - Comparacion de Tasas (Dashboard)

**Problema:** La card "Comparacion de Tasas" usa una grafica con barras de diferentes tamaÃ±os que confunde visualmente.

**Solucion:** Reemplazar grafica por lista compacta.

### Especificaciones

| Aspecto       | Detalle                                         |
| ------------- | ----------------------------------------------- |
| Formato       | Lista vertical simple                           |
| Contenido     | Par de monedas: valor de tasa                   |
| Ejemplo       | `USD/VES: 38.50` , `USD/COP: 4,150.00`          |

### Diseno Propuesto

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tasas de Cambio Actuales            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ USD/VES    38.50      (Binance)     â”‚
â”‚ USD/COP    4,150.00   (Oficial)     â”‚
â”‚ USDT/VES   38.00      (Binance)     â”‚
â”‚ USDT/COP   4,100.00   (Binance)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Archivos a Modificar

| Archivo                                          | Cambio                           |
| ------------------------------------------------ | -------------------------------- |
| `app/dashboard/_components/rate-comparison.tsx`  | Reemplazar grafica por lista     |

---

## Fase 7: UI - Balance por Cuenta (Dashboard)

**Problema:** La card "Balance por Cuenta" muestra valores en la moneda original, haciendo que COP parezca mayor que USD por los numeros grandes.

**Solucion:** Mostrar valores convertidos a USD como principal, con valor original en tooltip.

### Especificaciones

| Aspecto           | Detalle                                        |
| ----------------- | ---------------------------------------------- |
| Valor principal   | Monto convertido a USD                         |
| Valor secundario  | Monto original visible en hover/tooltip        |
| Conversion        | Usar tasa del sistema para cada moneda         |

### Diseno Propuesto

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Balance por Cuenta                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Efectivo USD      $150.00           â”‚  <- Ya esta en USD
â”‚ Efectivo COP      $24.10  [?]       â”‚  <- Hover: COP 100,000
â”‚ Binance USDT      $500.00           â”‚  <- USDT 1:1
â”‚ Banco Nequi       $12.05  [?]       â”‚  <- Hover: COP 50,000
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Archivos a Modificar

| Archivo                                           | Cambio                           |
| ------------------------------------------------- | -------------------------------- |
| `app/api/dashboard/service.ts`                    | Agregar campo convertedToUsd     |
| `app/dashboard/_components/account-balance.tsx`   | Mostrar USD + tooltip original   |

---

## Fase 8: Feature - Sistema de Vueltos

**Objetivo:** Permitir registrar vueltos al crear gastos e ingresos, con soporte para vueltos en diferente moneda.

### Especificaciones Generales

| Aspecto              | Detalle                                              |
| -------------------- | ---------------------------------------------------- |
| Modulos              | Gastos e Ingresos                                    |
| Activacion           | Toggle "Â¿Recibiste vueltos?" / "Â¿Diste vueltos?"     |
| Moneda vueltos       | Puede ser igual o diferente a la transaccion         |
| Cuenta vueltos       | Puede ser igual o diferente a la cuenta principal    |
| Tasa de cambio       | Usar tasa del sistema cuando monedas son diferentes  |
| Registro             | Crear transferencia visible con nota automatica      |

### Casos de Uso

#### Caso 1: Gasto con vuelto en MISMA cuenta

```
Gasto: $10 USD de cuenta "Efectivo USD"
Vuelto: $5 USD a cuenta "Efectivo USD"
Resultado: Gasto registrado por $5 USD (monto neto: 10 - 5 = 5)
```

#### Caso 2: Gasto con vuelto en DIFERENTE cuenta

```
Gasto: $10 USD de cuenta "Efectivo USD"
Vuelto: 10,000 COP a cuenta "Efectivo COP"
Tasa sistema: 1 USD = 4,000 COP

Calculos:
- Equivalente vuelto en USD: 10,000 / 4,000 = $2.50 USD
- Gasto real: $10 - $2.50 = $7.50 USD

Resultado:
1. Gasto registrado por $7.50 USD
2. Transferencia automatica: $2.50 USD (Efectivo USD) -> 10,000 COP (Efectivo COP)
   Nota: "Vuelto de gasto: [descripcion del gasto]"
```

#### Caso 3: Ingreso con vuelto (dar vueltos)

```
Ingreso: $100 USD a cuenta "Efectivo USD"
Vuelto dado: 50,000 COP de cuenta "Efectivo COP"
Tasa sistema: 1 USD = 4,000 COP

Calculos:
- Equivalente vuelto en USD: 50,000 / 4,000 = $12.50 USD
- Ingreso real: $100 - $12.50 = $87.50 USD

Resultado:
1. Ingreso registrado por $87.50 USD
2. Transferencia automatica: 50,000 COP (Efectivo COP) -> $12.50 USD (Efectivo USD)
   Nota: "Vuelto dado en ingreso: [descripcion del ingreso]"
```

### Validaciones

| Validacion                      | Comportamiento                                      |
| ------------------------------- | --------------------------------------------------- |
| Vuelto > monto original         | Mostrar advertencia, permitir guardar si confirma   |
| Cuenta vuelto sin saldo         | Permitir (puede quedar en negativo)                 |
| Monedas diferentes sin tasa     | Mostrar error, no permitir hasta tener tasa         |

### Cambios en Schema Prisma

```prisma
model Expense {
  // ... campos existentes

  // Nuevos campos para vueltos
  hasChange           Boolean   @default(false)
  changeAmount        Decimal?  @db.Decimal(18, 2)
  changeAccountId     String?
  changeAccount       Account?  @relation("ExpenseChangeAccount", fields: [changeAccountId], references: [id])
  changeCurrencyId    String?
  changeCurrency      Currency? @relation("ExpenseChangeCurrency", fields: [changeCurrencyId], references: [id])
  changeTransferId    String?   // Referencia a la transferencia automatica
  changeTransfer      Transfer? @relation(fields: [changeTransferId], references: [id])
}

model Income {
  // ... campos existentes

  // Nuevos campos para vueltos
  hasChange           Boolean   @default(false)
  changeAmount        Decimal?  @db.Decimal(18, 2)
  changeAccountId     String?
  changeAccount       Account?  @relation("IncomeChangeAccount", fields: [changeAccountId], references: [id])
  changeCurrencyId    String?
  changeCurrency      Currency? @relation("IncomeChangeCurrency", fields: [changeCurrencyId], references: [id])
  changeTransferId    String?
  changeTransfer      Transfer? @relation(fields: [changeTransferId], references: [id])
}
```

### Diseno de UI - Formulario de Gastos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nuevo Gasto                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Monto:        [    10.00    ]  Moneda: [ USD v ]        â”‚
â”‚ Cuenta:       [ Efectivo USD                    v ]     â”‚
â”‚ Categoria:    [ Comida                          v ]     â”‚
â”‚ Descripcion:  [ Almuerzo                          ]     â”‚
â”‚ Fecha:        [ 2026-01-16                      ğŸ“… ]    â”‚
â”‚                                                         â”‚
â”‚ [ ] Â¿Recibiste vueltos?                                 â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Monto vuelto:  [   5.00   ]  Moneda: [ USD v ]      â”‚ â”‚
â”‚ â”‚ Cuenta vuelto: [ Efectivo USD                  v ]  â”‚ â”‚
â”‚ â”‚                                                     â”‚ â”‚
â”‚ â”‚ Gasto real: $5.00 USD                               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚                              [ Cancelar ] [ Guardar ]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Archivos a Crear/Modificar

| Archivo                                       | Cambio                                |
| --------------------------------------------- | ------------------------------------- |
| `prisma/schema.prisma`                        | Agregar campos de vueltos             |
| `app/api/expenses/schema.ts`                  | Agregar validacion de vueltos         |
| `app/api/expenses/service.ts`                 | Logica de calculo y transferencia     |
| `app/api/expenses/types.ts`                   | Tipos para vueltos                    |
| `app/api/incomes/schema.ts`                   | Agregar validacion de vueltos         |
| `app/api/incomes/service.ts`                  | Logica de calculo y transferencia     |
| `app/api/incomes/types.ts`                    | Tipos para vueltos                    |
| `app/dashboard/expenses/_components/expense-form.tsx` | UI de vueltos              |
| `app/dashboard/incomes/_components/income-form.tsx`   | UI de vueltos              |

### Flujo de Implementacion

```
1. Usuario activa toggle "Â¿Recibiste vueltos?"
2. Aparecen campos: monto vuelto, moneda, cuenta
3. Usuario llena los campos
4. Sistema calcula:
   a. Si misma cuenta: monto_real = monto - vuelto
   b. Si diferente cuenta:
      - Convertir vuelto a moneda del gasto usando tasa sistema
      - monto_real = monto - vuelto_convertido
5. Mostrar preview del calculo en tiempo real
6. Al guardar:
   a. Crear gasto/ingreso con monto_real
   b. Si cuenta diferente: crear transferencia automatica
   c. Asociar transferencia al gasto/ingreso
```

---

## Migracion de Base de Datos

```bash
# Despues de modificar schema.prisma
yarn db:generate
yarn db:migrate --name add_change_fields
```

---

## Verificacion

### Fase 1 - Sidebar (Mobile y Desktop)

- [x] En mobile, al abrir un accordion los demas se cierran
- [x] En desktop, al abrir un accordion los demas se cierran
- [x] Accordion con item activo puede cerrarse
- [x] Auto-apertura del grupo con la ruta activa
- [x] Scroll funciona correctamente

### Fase 2 - Dropdown

- [x] Dropdown de categoria padre tiene scroll interno
- [x] Se pueden ver todas las opciones haciendo scroll
- [x] No hay overflow fuera del viewport

### Fase 3 - Ahorro Tasas

- [x] Card muestra valor correcto del mes actual
- [x] Formula calcula ahorro/perdida segun tipo de transaccion
- [x] Muestra $0 solo si no hay transacciones con tasa custom

### Fase 4 y 5 - Colores y Fondo

- [x] Colores pasteles aplicados en modo oscuro
- [x] Fondo gris #2a2a2a en modo oscuro
- [x] Modo claro sin cambios
- [x] Graficos usan nuevos colores

### Fase 6 - Comparacion Tasas

- [x] Lista compacta en lugar de grafica
- [x] Muestra todos los pares de monedas con sus tasas
- [x] Fuente de la tasa visible (Binance/Oficial)

### Fase 7 - Balance Cuenta

- [x] Valores mostrados en USD
- [x] Tooltip muestra valor original
- [x] Conversion correcta usando tasa del sistema

### Fase 8 - Sistema Vueltos

- [x] Toggle activa/desactiva seccion de vueltos
- [x] Calculo en tiempo real del monto neto
- [x] Vuelto misma cuenta: ajusta monto automaticamente
- [x] Vuelto diferente cuenta: crea transferencia
- [x] Selector de moneda para vueltos con auto-complete
- [x] Resumen detallado del movimiento (debito/credito neto, tasa, conversion)
- [x] Funciona en gastos e ingresos

### Mejoras Adicionales de UX

- [x] Seleccion jerarquica de categorias en gastos (categoria padre + subcategoria opcional)
- [x] Dialogs con max-height y scroll interno para evitar overflow en pantallas pequeÃ±as

---

## Notas de Implementacion

### Sistema de Vueltos - Logica de Calculo

El sistema de vueltos permite registrar cambio recibido (gastos) o dado (ingresos) con soporte multi-moneda:

**Para Gastos:**
- Si pagas 10 USD y recibes 3671.77 COP de vuelto (tasa 1 USD = 3671.77 COP)
- El vuelto equivale a 1 USD (3671.77 / 3671.77 = 1)
- Debito neto de la cuenta USD: 9 USD (10 - 1)
- Si la cuenta de vuelto es diferente: +3671.77 COP a esa cuenta

**Para Ingresos:**
- Si recibes 10 USD y das 3671.77 COP de vuelto
- El vuelto equivale a 1 USD
- Credito neto a la cuenta USD: 9 USD (10 - 1)
- Si la cuenta de vuelto es diferente: -3671.77 COP de esa cuenta

### Archivos Modificados

| Archivo | Cambio |
| ------- | ------ |
| `prisma/schema.prisma` | Campos hasChange, changeAmount, changeAccountId, changeTransferId |
| `app/api/expenses/service.ts` | Logica de vueltos con conversion de tasas |
| `app/api/incomes/service.ts` | Logica de vueltos con conversion de tasas |
| `app/api/expenses/types.ts` | Tipos para sistema de vueltos |
| `app/api/incomes/types.ts` | Tipos para sistema de vueltos |
| `app/dashboard/expenses/_components/expense-form.tsx` | UI de vueltos + categorias jerarquicas |
| `app/dashboard/incomes/_components/income-form.tsx` | UI de vueltos |
| `components/ui/dialog.tsx` | max-h-[90vh] overflow-y-auto |
| `components/layout/sidebar.tsx` | Accordion exclusivo en desktop |
| `components/layout/sidebar-group.tsx` | Soporte para modo controlado (isOpen, onOpenChange) |
| `components/layout/mobile-sidebar.tsx` | Accordion exclusivo en mobile |

---

_WalletWise v1.6.0 - Polish & Improvements (Completado 2026-01-16)_
